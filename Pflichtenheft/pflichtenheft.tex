\documentclass[a4paper, 12 pt]{article}

\setlength{\voffset}{-0.5cm}


\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[german]{babel}

\usepackage{graphicx}
\usepackage[absolute]{textpos}

\usepackage{amsmath}
\usepackage{hyperref}
\usepackage[nameinlink]{cleveref}
\crefname{figure}{Abb.}{Abb.}

\usepackage{pflichtenheft}

%für Glossar
\usepackage[nonumberlist, section]{glossaries}

%Glossareinträge
\makenoidxglossaries

	\newglossaryentry{IoT}{
		name={Internet der Dinge},description={Das Internet der Dinge (Internet of Things, IoT) ist ein Sammelbegriff für Technologien der globalen Infrastruktur, die es ermöglicht, physische und virtuelle Gegenstände miteinander zu vernetzen und sie zusammenarbeiten zu lassen}
	}

	\newglossaryentry{ogc}{
		name={OGC},description={Das \textbf{O}pen \textbf{G}eospatial \textbf{C}onsortium ist eine gemeinnützige Organisation, die sich zum Ziel gesetzt hat, die Entwicklung von raumbezogener Informationsverarbeitung (insbesondere Geodaten) auf Basis allgemeingültiger Standards festzulegen}
	}

	\newglossaryentry{stApi}{
		name={SenosorThings API},description={Allgemeiner einheitlicher Standard um Verbindung zwischen Sensoren, deren Ort und Umgebung und den von ihnen erzeugten Daten herzustellen}
	}

	\newglossaryentry{frost}{
		name={FROST-Server},description={Der \textbf{FR}auenhofer \textbf{O}penSource \textbf{S}ensor\textbf{T}hings-Server ist die erste komplette quelloffene Implementierung der \gls{ogc} \gls{stApi}}
	}

	\newglossaryentry{csvExcel}{
		name={CSV-/Excel-Datei},description={CSV (Comma Seperated Value, .csv) und Excel (.xlsx/.xls) sind gängige Dateiformate zum Speichern von Daten (hier speziell: Sensor-Daten) in Tabellenform}
	}

	\newglossaryentry{int}{
		name={Integer},description={Mit Integer wird in der Informatik ein Datentyp bezeichnet, der ganzzahlige Werte speichert}
	}

	\newglossaryentry{magicnum}{
		name={Magic Number},plural={Magic Numbers},description={Deutsch: Magische Zahl. Ein im Quellcode eines Programms auftauchender Zahlenwert, dessen Bedeutung sich nicht unmittelbar erkennen lässt}
	}

	\newglossaryentry{aggr}{
		name={Aggregation},plural={Aggregationen},description={Eine Aggregation beschreibt eine Zusammenfassung mehrerer Daten. Zum Beispiel die Summe, der Durchschnitt oder Minimum/Maximum}
	}

	\newglossaryentry{jre}{
		name={JRE},description={Mit der Java-Laufzeitumgebung (\textbf{J}ava \textbf{R}untime \textbf{E}nvironment) werden Programme (Java-Anwendungen) weitgehend unabhängig vom darunter liegenden Betriebssystem ausgeführt}
	}

	\newglossaryentry{headless}{
		name={headless},description={Als headless (kopflos) bezeichnet man Computer, meist Serversysteme, die über keinen Bildschirm oder sonstige grafische Ausgabe verfügen.
			Diese Systeme haben als Steuerungsmöglichkeit in vielen Fällen eine Netzwerkverbindung}
	}

	\newglossaryentry{js}{
		name={JavaScript},description={JavaScript ist eine Programmiersprache, die hauptsächlich auf Webbrowsern Anwendung findet}
	}

	\newglossaryentry{logdat}{
		name={Log-Datei},description={Eine Log-Datei, auch Protokoll-Datei, enthält das automatisch geführte Protokoll aller oder bestimmter Aktionen von Prozessen auf einem Computersystem}
	}

	\newglossaryentry{docker}{
		name={Docker},description={Docker ist eine Software zur Isolierung von Anwendungen. Docker vereinfacht die Bereitstellung von Anwendungen, weil sich sog. Container, die alle nötigen Pakete enthalten, leicht als Dateien transportieren und installieren lassen}
	}

	\newglossaryentry{ssl}{
		name={SSL},description={SSL steht für \textbf{S}ecure \textbf{S}ockets \textbf{L}ayer und ist die Standardtechnologie für die Absicherung von Internetverbindungen und den Schutz sensibler Daten, die zwischen zwei Systemen übertragen werden}
	}

	\newglossaryentry{https}{
		name={HTTPS},description={\textbf{H}yper\textbf{T}ext \textbf{T}ransfer \textbf{P}rotocol \textbf{S}ecure (HTTPS) ist ein sicheres Hypertext-Übertragungsprotokoll, das \gls{ssl} benutzt}
	}

	\newglossaryentry{regex}{
		name={RegEx},description={\textbf{Reg}ular \textbf{Ex}pressions (Regex, regulärer Ausdrucke) dienen der Beschreibung von Zeichenketten mit ähnlichem Format.
			Sie können als Filterkriterien in der Textsuche verwendet werden, indem der Text mit dem Muster des regulären Ausdrucks verglichen wird}
	}

	\newglossaryentry{iosb}{
		name={Fraunhofer IOSB},description={Das Fraunhofer-Institut für Optronik, Systemtechnik und Bildauswertung ist in der angewandten Forschung und Entwicklung im Fach Ingenieurwissenschaften auf dem Gebiet der Informations- und Kommunikationstechnologie aktiv. So entwickelten sie unter anderem den \gls{frost}, der in diesem Projekt die zentrale Rolle spielt}
	}

	\newglossaryentry{thing}{
		name={Thing},plural={Things},description={Ein Thing (deutsch: Gegenstand/Ding) ist nach Definition der SensorThings API ein Objekt der physischen oder virtuellen Welt. Es benötigt einen Namen und eine Beschreibung. Es können sich ein oder mehrere Datastreams auf ein Thing beziehen}
	}

	\newglossaryentry{ds}{
		name={(Datastream)},plural={Datastreams},description={Ein Datastream ist eine fortlaufende Sammlung von Messungen (Observations) des selben Sensors und der selben ObservedProperty. Multi-Datastreams haben mehrere ObservedProperties}
	}
	
	\newglossaryentry{obsprop}{
		name={ObservedProperty},plural={ObservedProperties},description={beobachtete Eigenschaft: Spezifiziert das Phänomen einer Beobachtung (Observation)}
	}

	\newglossaryentry{location}{
		name={Location},plural={Locations},description={Beschreibt den Ort eines oder mehrerer Things}
	}

	\newglossaryentry{obs}{
		name={Observation},plural={Observations},description={Beobachtung: Die Aktion des Messens eines Wertes einer Eigenschaft}
	}

	\newglossaryentry{sensor}{
		name={Sensor},description={Misst eine Eigenschaft um eine Approximation des Wertes der Eigenschaft zurückzugeben}
	}

	

	

\author{Fabian Nguyen \and Andreas Wieland \and Maximilian Göckel \and Adrian Cierpka \and Frithjof Marquardt}
\title{Management von Sensordaten}

\hyphenation{Ü-ber-tra-gungs-fort-schrit-te}

\begin{document}

\maketitle
\newpage
\tableofcontents
\newpage

	%TODO
	\section{Produktübersicht}

	%Max
	Eines der wichtigsten Themen im \gls{IoT} (IoT) sind Sensordaten. Mit ihnen lassen sich Informationen über die Dinge um uns herum herausfinden. Sensordaten werden schon seit Jahren aufgenommen, gesammelt, und verarbeitet. Ein Ziel des IoT ist es, mit mehr Sensoren mehr Daten aufzunehmen. \\

	Damit diese Massen von Sensordaten in ihrer eigenen Vielfalt effizient verarbeitet werden können, bedarf es einem einheitlichen Standard. Das \gls{ogc} stellt als Standardisierungsgremium dazu die \gls{stApi} \footnote{http://docs.opengeospatial.org/is/15-078r6/15-078r6.html} bereit, welche die durch jahrelange Erfahrung im Arbeiten mit Sensordaten entstandenen Konzepte an die Anforderungen und Möglichkeiten neuer Schnittstellen anpasst. \\

	Der \textbf{FR}aunhofer\textbf{O}penSource\textbf{S}ensor\textbf{T}ings-Server (\gls{frost})\footnote{https://www.iosb.fraunhofer.de/servlet/is/80113/} des \gls{iosb} ist eine Implementierung des SensorThings-Standards. Der Server will die \gls{stApi} ressourcenschonend und mit hoher Leistungsfähigkeit bereitstellen. Das Institut hat sich direkt von Anfang dazu entschlossen, die Software erreichbarer zu machen und entwickelte den Server von Anfang als Open Source Software\footnote{https://github.com/FraunhoferIOSB/FROST-Server}. \\

	Neben dem \gls{frost} stellt das \gls{iosb} auch den FROST-Client bereit, eine Bibliothek, die hilft auf die \gls{stApi} zuzugreifen\footnote{https://github.com/FraunhoferIOSB/FROST-Client}. \\
	\ \\
	CHILLImport stellt zu dem \gls{frost} eine Webseite bereit, die es Nutzern ermöglicht, Daten aus Tabellen (beispielsweise einer Excel-Tabelle) in ein \gls{stApi}-freundliches Format zu konvertieren und auf eine \gls{frost}-Instanz hochzuladen. Die Software soll auf der einen Seite so einfach zu bedienen sein, dass auch technisch unerfahrene Nutzer die Grundfunktionen nutzen können. Auf der anderen Seite soll sie stark konfigurierbar sein, um auch erfahrene Nutzer mit hohen Ansprüchen zufrieden zu stellen.\\

\newpage
	\section{SensorThings API}

	Die \gls{stApi} besteht aus folgenden Elementen, die miteinander im Zusammenhang stehen. Jedes Element hat bestimmte Eigenschaften. Diese und die Beziehungen sind im unten abgebildeten UML-Diagramm (\cref{fig:ogc}) dargestellt. \\
	\begin{enumerate}
	
	\item Thing (Gegenstand): ein Objekt aus der realen Welt (physisches Thing) oder ein virtuelles Thing.
	\item Locations (Orte): Beschreiben den Ort eines oder mehrerer Things.
	\item HistoricalLocations (historische Orte): Beschreibt die zuletzt bekannte und vergangene Orte des/der Things zusammen mit ihrem Zeitpunkt.
	\item Sensor: Misst eine Eigenschaft um eine Approximation des Wertes der Eigenschaft zurückzugeben
	\item Observation (Beobachtung): Die Aktion des Messens eines Wertes einer Eigenschaft
	\item ObservedProperty (beobachtete Eigenschaft): Spezifiziert das Phänomen einer Beobachtung
	\item FeatureOfInterest: Eine Beobachtung erzeugt einen Wert, welcher an ein Phänomen gekoppelt ist. Diese Phänomen ist Teil eines Features, welches das FeatureOfInterest einer Beobachtung ist
	\item Datastream (Datenfluss): Eine Menge von Beobachtungen über die selbe ObservedProperty vom selben Sensor   
	\end{enumerate}
	Die genaue Beschreibung aller Elemente und Beziehungen sind zu finden unter: \\
	\href{http://developers.sensorup.com/docs/}{SensorUp Developer Page}\footnote{http://developers.sensorup.com/docs/}\\
	\href{https://en.wikipedia.org/wiki/SensorThings_API}{Wikipedia-Artikel zur API}\footnote{https://en.wikipedia.org/wiki/SensorThings\_API}\\
	\href{http://docs.opengeospatial.org/is/15-078r6/15-078r6.html}{OGC-Dokumentation von SensorThings}\footnote{http://docs.opengeospatial.org/is/15-078r6/15-078r6.html}\\

\begin{figure}
\centering
\includegraphics[scale=0.8]{images/ogc}
\caption{\label{fig:ogc}Klassendiagramm der SensorThings API}
\end{figure}

\newpage
\section{Zielbestimmung}
	\subsection{Musskriterien}
	\begin{enumerate}
	\item Import von Daten \\
	Die Daten sollen aus Tabellen im \gls{csvExcel}format importiert werden
	\item Konvertierung des Formats der Sensordaten \\
	Die Daten sollen aus den beliebigen Datenformaten und Anordnungen innerhalb der Quelldatei in den einheitlichen Standard der \gls{stApi} konvertiert werden.
	Damit entsprechen sie dem Standard der Daten auf einem \gls{frost}.
	\item Erstellen, Abspeichern und Laden von Konfigurationen \\
	Der Benutzer soll Spaltenformat, Datenformat und insbesondere das Datums- und Zeitformat einstellen und als Konfiguration abspeichern können.
	Diese Konfigurationen sollen später auch wieder geladen werden können.
	\item Datentyptransformationen \\
	Alle Werte sind in der Quelldatei als String vorhanden und müssen, bevor sie auf den \gls{frost} geladen werden, in den passenden Datentyp (bspw. \gls{int}) umgewandelt werden.
	Sonderwerte (\glspl{magicnum}) sollen nicht auf den \gls{frost} geladen, sondern separat behandelt werden.
	\end{enumerate}

	\subsection{Wunschkriterien}
	\begin{enumerate}
	\item Standard-Konfiguration \\
	Dem Benutzer wird eine vorgefertigte Konfiguration bestehend aus Spaltenformat, Datenformat und Datums- und Zeitformat bereitgestellt.
	\item Überprüfung auf Duplikate \\
	Beim Upload der Daten auf den \gls{frost} werden diese mit den bestehenden Daten abgeglichen und Duplikate werden nicht erneut gespeichert.
	\item Rückgabe nicht bearbeiteter Datensätze in neuer \gls{csvExcel} \\
	Bei (teilweise) fehlgeschlagener Übertragung zum \gls{frost} werden die nicht übertragenen Daten in einer \gls{csvExcel} an den Benutzer zurückgegeben.
	\item Korrektur von falschen Daten \\
	Der Benutzer hat die Möglichkeit Fehler in den Daten direkt zu korrigieren.
	\item Import von Fremdquellen wie anderen Webseiten \\
	Es soll möglich sein als Quelldatei auch einen entfernten Speicherort, zum Beispiel einen Weblink anzugeben.
	\item Automatisierte Daten-Aktualisierung \\
	Bei Import von Daten von einer entfernten Adresse wird eine automatische, regelmäßige Übertragung angeboten.
	\item Import kompletter Datensätze von anderem \gls{frost} \\
	Der Benutzer hat zusätzlich die Möglichkeit, Daten von einem anderen \gls{frost} zu kopieren
	\item Auswahl komplexer Transformationen/\gls{aggr}\\ 
	\gls{aggr} auf ausgewählten Daten (bspw. Summe oder Durschnitt) werden dem Benutzer bereitgestellt.
	\item Automatische Formaterkennung \\
	Aus der Quelldatei werden Spaltenformat, Datenformat und Datums- und Zeitformat automatisch erkannt und eine entsprechende Konfiguration generiert.
	Diese Konfiguration ersetzt die Standard-Konfiguration.
	\item automatische Sprachauswahl \\
	Die Anwendung übernimmt automatisch die in Browser eingestellte Sprache.
	\end{enumerate}

	\subsection{Abgrenzungskriterien}
	\begin{enumerate}
	\item Keine Verwaltung des \gls{frost}s \\
	Die Software soll keine schon auf dem \gls{frost} liegenden Daten verwalten, ändern oder löschen.
	\item Keine Benutzer-Verwaltung \\
	Es wird keine Benutzer-Verwaltung mit verschiedenen Benutzerkonten bereitgestellt.
	Jeder Benutzer kann somit die gespeicherten Konfigurationen aller Benutzer sehen und verwenden.
	\item Keine mobilen Endgeräte \\
	Die Software muss nicht auf mobilen Endgräten laufen können.
	\end{enumerate}

\newpage
\section{Anwendungsbereiche}
Die Software kommt überall dort zum Einsatz wo Sensordaten aus Tabellen weiterverarbeitet müssen. \\
\begin{itemize}
	\item Forschungsprojekt, bei dem die Sensordaten in Tabellenform vorliegen. Diese Daten sollen in eine FROST-Instanz hochgeladen werden um ggf. weiterverarbeitet zu werden
	\item Der Import neuer Sensordaten durch den Mitarbeiter einer Firma (zB Stadtwerke)
	\item Die Integration bestehender Daten in Tabellenform durch einen wissenschaftlichen Mitarbeiter o.ä.
\end{itemize}



%Überall wo Daten im CSV-Format verarbeitet werden müssen: \\
%Die Software soll überall dort eingesetzt werden, wo Daten aus Tabellen importiert, %konvertiert und auf den FROST-Server übertragen werden sollen. \\
%Hierzu zählt:
%\begin{itemize}
%	\item Der Import von neuen Sensordaten, welche in CSV-/XSLX-Tabellen-Form vorliegen
%	\item Die Integration von bestehenden (archivierten) Sensordaten, welche in CSV-/XLSX-Tabellen-Form vorliegen
%\end{itemize}


	
	%TODO Die zwei Zielgruppen genauer darstellen/abgrenzen
	\section{Zielgruppen}
	Die Software ist auf zwei Zielgruppen ausgelegt.\\
	\begin{enumerate}
		\item Personen, welche einfach Sensordaten auf einen FROST-Server laden möchten, ohne die Konfigurationen zu ändern
		
		\begin{itemize}
			\item Wenig bis keine Fachkenntnisse
			\item Fokus auf einfache und schnelle Bedienung der Software
		\end{itemize}
		
		\item Nutzergruppe, die ihre eigenen Konfigurationen erstellt
		\begin{itemize}
			\item Umfangreiches Wissen im Umgang mit der Software
			\item Fokus auf komplexe Einstellungsmöglichkeiten in den Konfigurationen
		\end{itemize} 
	\end{enumerate}
	
	\newpage
\section{Betriebsbedingungen}
\begin{itemize}
	\item Die Software soll dauerhaft laufen. Geplante Betriebspausen oder Wartungszeiten sind nicht vorgesehen
	\item Die Software soll auf einem Webserver laufen, jedoch ist nicht sichergestellt dass die Laufzeit des Servers unterbrechungsfrei ist. Unter anderem kann die Stromversorgung plötzlich ausfallen oder der Server wird ausgeschaltet ohne vorher heruntergefahren zu werden
	\item Die Software soll längere Zeit ohne Überwachung laufen, denn gerade bei längeren Uploads kann es sein dass der Nutzer nicht immer anwesend ist.
	\item Ein Zugriff auf das Interface der Software von einem Mobilgerät aus ist nicht vorgesehen
\end{itemize}
	
\section{Produktumgebung}
Server:
\begin{itemize}
	\item Beliebiges Betriebssystem, höchstwahrscheinlich jedoch Unix/Linux
	\item Installiertes Java \gls{jre}
	\item Kleiner Webserver
	\begin{itemize}
		\item \gls{headless}
		\item Unicore CPU
		\item 1-2GB RAM
		\item Speichermedium mit genug Speicherplatz für Software und temporäre Daten (8GB stark ausreichend)
	\end{itemize}
	\item Netzwerkanschluss an den \gls{frost} und an den Nutzer-Computer
\end{itemize}

\noindent Client:

\begin{itemize}
	\item Moderner Webbrowser
	\item \gls{js}
	\item Netzwerkanschluss an den CHILLImport-Server
\end{itemize}
	
	\begin{itemize}
		\item \gls{headless} Server
		\item Linux/Windows Server
		\item Java \gls{jre}
		\item \gls{stApi}
	\end{itemize}

\section{Seitenentwürfe}

\subsection{Hauptseite}
Die Software stellt eine Weboberfläche zum Einfügen von Sensor-Datensätzen auf einen \gls{frost} zur Verfügung. 
Dieser Zielserver wird einmalig beim erstmaligen Aufsetzen der Software eingestellt und ist nicht über das Webinterface einstellbar. 
Ein Entwurf für die Hauptseite der Weboberfläche ist in \cref{fig:guiMain} (siehe Anhang \cref{fig:guiMainA} für vergrößerte Darstellung) zu sehen.
\\

\begin{figure}[htbp]
\centering
\includegraphics[scale=0.32]{images/gui}
\caption{\label{fig:guiMain}Hauptseite der Weboberfläche}
\end{figure}
Beim Aufrufen der Weboberfläche ist zu Beginn nur der Bereich zum Auswählen der Quelldatei sichtbar. 
Nach dem Einstellen der Quelle wird das Dateiformat überprüft und ein passender Konfigurator für das Spaltenformat der Datei und das Format der Daten in den Spalten wird sichtbar. \\

Über das Log werden eventuelle Fehlermeldungen und Übertragungsfortschritte angezeigt. Unter "{Choose Configuration}" lässt sich eine auf dem Server gespeicherte Konfigurationsdatei auswählen. Dort bieten sich folgende Möglichkeiten:
\begin{itemize}
\item Unter "{Configuration}" kann eingestellt werden, in welcher Form die Daten in der Quelldatei angespeichert sind, um diese dann in den vom \gls{frost} verwendeten \gls{ogc}-Standard zu konvertieren.
\item Zuerst ist das Trennsymbol für die Spalten in der Quelldatei und die Anzahl der Kopfzeilen (nicht zum Datensatz gehörige Zeilen) anzugeben. 
\item Dann kann das zu den Daten gehörige \gls{thing} von schon auf dem \gls{frost} existierenden \glspl{thing} ausgewählt werden. Falls es benötigt wird, lässt sich über den "{Create Thing}"{-Button} ein neues \gls{thing} erstellen. (siehe \cref{fig:thing})
\item Unter "{DateTime}"{ ist} das Datumsfomat einstellbar. Erst wird die Zeitzone eingegeben und danach lassen sich das Format für das Datum bzw. die Zeit als \gls{regex} und die zugehörige Spaltennummer angeben.
\item Abschließend lassen sich ein oder mehrere (Multi-)\glspl{ds} auswählen. Existiert der (Multi-)\gls{ds} noch nicht, kann er über "{Create DS}"{ erstellt} werden. Mit Hilfe des "{Add DS}"{-Buttons} lassen sich weitere (Multi-)\glspl{ds} hinzufügen. Anschließend lassen sich wieder die zu den Daten gehörigen Spalten in der Quelldatei einstellen.
\item Außerdem bietet die Weboberfläche über den "{Save}"{-Button} die Möglichkeit, eine bestehende Konfiguration auf dem Server abzuspeichern bzw. über den "{Reset}"{-Button} auf die Standard-Konfiguration zurückzusetzen.
\item Über den "{Upload}"{-Button} werden die Daten auf den \gls{frost} hochgeladen.
\item Der "{Help}"{-Button} ermöglicht den Zugriff auf eine Kurzanleitung für das Webinterface.
\end{itemize}

\subsection{Thing erstellen}
Wie in \cref{fig:thing} dargestellt, müssen Name, Beschreibung und Eigenschaften gewählt werden, um ein \gls{thing} zu erstellen. Über den "{Add property}"{-Button} kann eine weitere Eigenschaft als Key-Value-Paar hinzugefügt werden. Abschließend muss eine bestehende \gls{location} gewählt bzw. eine neue erstellt werden (siehe \cref{fig:loc}).

\begin{figure}[htbp]
\centering
\includegraphics[scale=0.8]{images/thing}
\caption{\label{fig:thing}Dialogfenster zum Erstellen eines Things.}
\end{figure}


\subsection{Datastream erstellen}
\cref{fig:ds} zeigt das Dialogfenster zum Erstellen eines (Multi-)Datastreams. 
\begin{figure}[htbp]
\centering
\includegraphics[scale=0.8]{images/datastream}
\caption{\label{fig:ds}Dialogfenster zum Erstellen eines Datastreams.}
\end{figure}
Es müssen erst Name, Beschreibung, Observation Type und ein \gls{sensor} gewählt werden. Soll dafür ein neuer \gls{sensor} angelegt werden, existiert der "{Create Sensor}"{-Button} (siehe \cref{fig:sensor}).\\

Im unteren Teil lassen sich die gemessenen Größen für eine Messwertreihe festlegen. Existiert eine solche Größe noch nicht, lässt sie sich über den "{Create Property}"{-Button} anlegen (siehe \cref{fig:oprop}). Mit dem "{Add unit}"{-Button} kann eine weitere Messwertreihe hinzugefügt werden. Hat ein \gls{ds} mehr als eine solche Größe, wird er als Multi-\gls{ds} verwaltet.



\subsection{Sensor, ObservedProperty oder Location erstellen}
Das Erstellen eines \gls{sensor}s (siehe \cref{fig:sensor}), einer \gls{obsprop} (siehe \cref{fig:oprop}) oder einer \gls{location} (siehe \cref{fig:loc}) verläuft, indem alle Textfelder des jeweiligen Dialogfeldes passend ausgefüllt werden und anschließend der "{Create}"{-Button} gedrückt wird.

\begin{figure}[htbp]
\centering
\includegraphics[scale=1]{images/sensor}
\caption{\label{fig:sensor}Dialogfenster zum Erstellen eines Sensors.}
\end{figure}

\begin{figure}[htbp]
\centering
\includegraphics[scale=1]{images/oprop}
\caption{\label{fig:oprop}Dialogfenster zum Erstellen eines Things.}
\end{figure}

\begin{figure}[htbp]
\centering
\includegraphics[scale=1]{images/loc}
\caption{\label{fig:loc}Dialogfenster zum Erstellen einer Location.}
\end{figure}

\section{Funktionale Anforderungen}
\subsection{Erforderliche Funktionale Anforderungen}
	
	\begin{enumerate}
		\item Auswahlmöglichkeit der Datenquelle
		\begin{itemize}
			\item eine Datei
			\item externer Server (optional)
		\end{itemize}
		
		\item Laden, speichern von Konfigurationen
		
		\item Erstellen von Konfigurationen
		\begin{itemize}
			\item Einstellen des Spaltenseperators
			\item Einstellen der Datumsspalte/n
			\item Format des Datums einstellen
			\item Auswählen und erstellen von
			\begin{itemize}
				\item \glspl{thing}
				\item \glspl{location}, für neue \glspl{thing}
				\item \glspl{ds}
				\item \gls{sensor}s, für neue \glspl{ds}
				\item \glspl{obsprop}, für neue \glspl{ds}
			\end{itemize}
			\item Spaltenauswahl für Datenextraktion
		\end{itemize}
		
		\item Bereitstellen einer Default-Konfiguration
		
		\item Auswahlmöglichkeit des Zielservers
		\begin{itemize}
			\item Nicht in Webinterface möglich
		\end{itemize}
		
		\item Hochladen der Daten auf den \gls{frost}
		
		\item Formatieren der Daten in \gls{ogc} \gls{stApi} Standard
		
		\item Fehlermeldungen im Log
		\begin{itemize}
			\item Fehler in Datenzeilen
			\item Verbindungsfehler zum \gls{frost}
			\item Fehlerhafte Quelldatei
		\end{itemize}
		
		\item Anlegen einer \gls{logdat} mit
		\begin{itemize}
			\item Historie von Uploads
			\item Fehlermeldungen
		\end{itemize}
		
		\item Kurzanleitung auf der Weboberfläche.
	\end{enumerate}
	
	\subsection{Gewünschte Funktionale Anforderungen}
	\begin{enumerate}
		\item Duplikaterkennung um Datenredundanz zu vermeiden
		
		\item Rückgabe von Fehlerhaften Zeilen in einer neuen \gls{csvExcel}
		
		\item Auswahlmöglichkeit komplexer \gls{aggr} auf Daten:
		\begin{itemize}
			\item Summe
			\item Minimum
			\item Maximum
			\item Durchschnitt
		\end{itemize}
		Operationen sind nur Spaltenweise  möglich. 
	\end{enumerate}

	%TODO Nummerierung der Wunschkriterien in Fließtext
	\section{Produktdaten}
	
	Bei den Daten die auf dem Server gespeichert werden müssen wird unterschieden zwischen Nutzerdaten und Systemdaten.
	
\begin{itemize}
	\item Nutzerdaten:
	\begin{itemize}
		\item Konfigurationen
	\end{itemize}
	\item Systemdaten:
	\begin{itemize}
		\item \gls{logdat}
		\item Adresse des \gls{frost}
		\item Adresse der entfernten \gls{csvExcel} (optional) 
	\end{itemize}
\end{itemize}
	
	\section{Produktleistungen}
	\begin{itemize}
		\item Die Software dokumentiert Fehler jeglicher Art und das starten b.z.w abschließen von Uploads.
		\item Die Eingaben werden direkt verarbeitet. Dem Nutzer wird sofort Feedback über eine Fortschrittsleiste gegeben, sollte die Anfrage länger als eine Sekunde dauern.
		\item Die Daten werden korrekt an den \gls{frost} übermittelt, dazu gehört auch Robustheit der Anwendung gegenüber falschen Angaben.
		\item Der Nutzer erhält bei falschen Angaben oder Fehlern eine Rückmeldung.
		\item Zur einfachen Installation steht das Programm als \gls{docker}-Container zur Verfügung.
	\end{itemize}
	
	
	\section{Qualitätsanforderungen}
	Backend-Anforderungen (Software) :
	\begin{itemize}
	\item Das Programm soll über lange Zeiträume auch ohne Unterbrechungen zuverlässig ausgeführt werden können, solange die Produktumgebung dies zulässt.
	\item Interaktion oder Beobachtung durch den Nutzer werden nicht vorrausgesetzt.
	\item Eine einfache Portierung ist gegeben, da die Software auf Java basiert und damit Platformunabhängig ist. 
	\item Zu große oder zu viele Anfragen werden abgelehnt um Sicherheit zu gewährleisten und einer Überlastung des Servers vorzubeugen.
	\item Es soll möglichst einfach sein die Software schnell und unkompliziert zu ändern oder zu erweitern.
	\end{itemize}
	Frontend-Anforderungen (Weboberfläche) :
	\begin{itemize}
	\item Die Benutzbarkeit hat höchste Priorität, auch Nutzer ohne oder wenig technischem Vorwissen sollen in der Lage sein die Software zu bedienen.
	\item Die Daten sollten \gls{https}-/\gls{ssl}-Verschlüsselt werden um Abfangen der Daten zu verhindern.
	\end{itemize}
	

	\section{Testfälle}
	
	\test{Anzeigen der Weboberfläche}{}
	\ \\
	\teststep{Der Nutzer hat einen Browser geöffnet.}{Der Nutzer navigiert auf die Webseite.}{Die Webseite wird wie in \cref{fig:guiMain} dargestellt.}

	   
	
		\ \\
	\test{Konfigurieren und Hochladen}{}
		\ \\
	\teststep{Der Nutzer hat Quelle und Ziel eingegeben und bestätigt}{Der Nutzer füllt die Datums-/Uhrzeits-Spalte aus}{Die Software überprüft die Korrektheit der Spalten (Wurde eine Spalte angegeben, die nicht existiert?)}
		\ \\
	\teststep{Die Spalten wurden korrekt angegeben}{Der Benutzer gibt via RegEx das Format des Datums/der Uhrzeit in dem dazugehörigen Textfeld an}{Die Korrektheit des RegEx wird anhand der Werte der Tabellendatei auf Fehler geprüft}
		\ \\
	\teststep{Das Datum / die Uhrzeit wurde korrekt ausgefüllt}{Der Nutzer wählt das Thing aus dem Dropdown-Menü, welches alle Things enthält, aus}{Das Datastream-Dropdown-Menü wird mit den zum gewählten Thing gehörenden Data-/MultiData-Streams aktualisiert}
		\ \\
	\teststep{Thing wurde ausgewählt}{Der Anwender wählt den Datastream aus dem Datastream-Dropdown-Menü aus}{Das System lädt die zum Datastream/MultiDataStream gehörenden Messeinheiten neben die Textfelder zum eintragen}
		\ \\
	\teststep{Messdaten geladen}{Der Nutzer trägt die Spalten mit den Messwerten neben die Messeinheiten ein}{Die Korrektheit der Eintragung wird wieder durch die Software geprüft}
		\ \\
	\teststep{Alle Textfelder ausgefüllt}{der User klickt auf den Button "{Upload}"}{Die Daten in den angegebenen Spalten werden eingelesen, konvertiert und auf den FROST-Server übertragen}
		\ \\	
	
	\test{Datei als Quelle wählen}{}
	\ \\
	\teststep{Dem Nutzer wird die Webseite angezeigt.}{Der Nutzer wählt die Radio-Box "{Upload File}".}{Es wird ein Textfeld und ein "Browse\string"\string-Knopf angezeigt, um die hochzuladende Datei festzulegen.}
	\ \\
	\teststep{}{Der Nutzer drückt den "{Browse}"{-Knopf}.}{Es öffnet sich ein Dateimanager zum Auswählen der Datei.}
	\ \\
	\teststep{}{Der Nutzer wählt seine Datei aus.}{Der Dateipfad erscheint im Textfeld.}
	\ \\
	\test{Entfernte Webseite als Quelle wählen}{}
	\ \\
	\teststep{Dem Nutzer wird die Webseite angezeigt.}{Der Nutzer wählt die Radio-Box "{Choose Website}".}{Es wird ein Textfeld angezeigt, um die URL der entfernten Webseite festzulegen.}
	\ \\
	\teststep{}{Der Nutzer gibt eine URL ein.}{Die URL wird auf Gültigkeit überprüft und die zu ladende Datei auf dem Server der Weboberfläche zwischengespeichert.}
	\ \\
	
	\test{Konfiguration laden}{}
	\ \\
	\teststep{Der Nutzer befindet sich auf der Webseite und hat eine gültige Quelldatei angegeben. Es wird ein Konfigurator angezeigt.}{Der Nutzer wählt unter "{Choose Configuration}" eine abgespeicherte Konfiguration aus.}{Die entsprechende Datei wird auf Korrektheit überprüft und im Erfolgsfall ist der Konfigurator entsprechend der Datei eingestellt.}
		
	\ \\
%	\test{Zielserver wählen}{}
%	\ \\
%	\teststep{Dem Nutzer wird die Webseite angezeigt. Insbesondere existiert ein Textfeld zur Eingabe des Zielservers.}{Der Nutzer gibt einen FROST-Server als Ziel in das Textfeld ein und drückt den "{Submit}"{-Knopf}.}{Der Server wird auf Gültigkeit überprüft und bei Korrektheit erscheint ein Konfigurator zum Einstellen des Formats der Daten in der Quelldatei. Im Konfigurator ist der Default-Case voreingestellt.}
%	\ \\
	
	\test{Konfiguration zurücksetzen}{}
	\ \\
	\teststep{Der Nutzer befindet sich auf der Webseite und es wird der Konfigurator angezeigt.}{Der Nutzer drückt den "{Reset}"{-Knopf}.}{Alle eingestellten Konfigurationen werden auf den Default-Case zurückgesetzt.}
	\ \\
	
	
		
	\test{Neues Thing erstellen}{}
		\ \\
	\teststep{Die Datei und die FROST-Server-Domain wurden angegeben/hochgeladen}{Der Nutzer klickt auf den "{Create Thing}"{-Button}}{es öffnet sich der "{Create New Thing}"{-Dialog}}
		\ \\
	\teststep{Das Dialogfenster ist offen, Name und Beschreibung des Things wurden in die Textfelder eingetragen, die Location wurde aus dem Dropdown-Menü ausgewählt}{Der Nutzer klickt auf "{Create}"}{Das Thing wird auf dem FROST-Server erstellt und in dem Hauptinterface dem Dropdown-Menü hinzugefügt}
		\ \\
	
	\test{Properties zu Thing hinzufügen}{}
		\ \\
	\teststep{Der "{Create New Thing}"{-Dialog} ist offen}{Der Nutzer klickt einmal oder mehrfach auf den "{Add Property}"{-Button}}{es werden ein oder mehrere Textfeld-Paare im Interface erstellt in denen der Nutzer die Eigenschaft (Property) und den Wert (Value) des Things einstellen kann}
		\ \\


	\test{Neuen (Multi-)Datastream erstellen}{}
		\ \\
	\teststep{Die Datei und FROST-Server wurden angegeben und ein Thing ausgewählt}{Der User klickt auf den "{Create DS}"{-Button}}{Es öffnet sich der "{Create New DataStream}"{-Dialog} indem der User einen neuen DataStream oder MultiDataStream formulieren und erstellen kann}
		\ \\
	\teststep{Der User sieht das Dialogfenster zum erstellen eines DataStreams}{der User trägt Name und Beschreibung in die Textfelder ein, wählt Observation Type und Sensor aus den Dropdown-Menüs aus, trägt eine oder mehrere Units Of Measurement ein und klickt abschließend auf "{Create}"}{Die Software unterscheidet zwischen DataStream und MultiDataStream und legt den entsprechenden Stream mit den angegeben Daten im FROST-Server an}
		\ \\

	
	\test{Sensor erstellen}{}
	\ \\
	\teststep{Der Nutzer erstellt gerade einen Datastream (sieht den Dialog wie in \cref{fig:ds}) und der zugehörige Sensor existiert noch nicht.}{Der Nutzer drückt den "{Create Sensor}"{-Knopf}.}{Es öffnet sich das Dialogfenster zum Erstellen eines Sensors (siehe \cref{fig:sensor}).}
	\ \\
	\teststep{}{Der Nutzer füllt alle Textfelder aus und drückt den "{Create}"{-Knopf}.}{Die Daten werden überprüft und ein neuer Sensor wird angelegt. Das Dialogfenster wird geschlossen.}

	\ \\
	\test{ObervedProperty erstellen}{}
	\ \\
	\teststep{Der Nutzer erstellt gerade einen Datastream (sieht den Dialog wie in \cref{fig:ds}) und eine ObservedProperty für einen Datensatz existiert noch nicht.}{Der Nutzer drückt den "{Create Property}"{-Knopf}.}{Es öffnet sich das Dialogfenster zum Erstellen einer ObservedProperty (siehe \cref{fig:obsProp}).}
	\ \\
	\teststep{}{Der Nutzer füllt alle Textfelder aus und drückt den "{Create}"{-Knopf}.}{Die Daten werden überprüft und ein neue ObservedProperty wird angelegt. Das Dialogfenster wird geschlossen.}
	\ \\
	
	\test{Einen Datensatz zu einem Datastream hinzufügen}{}
	\ \\
	\teststep{Der Nutzer erstellt gerade einen Datastream (sieht den Dialog wie in \cref{fig:ds}).}{Der Nutzer drückt den "{Add unit}"{-Knopf}.}{Es wird eine neue leere Zeile in der Tabelle für die zum Datastream gehörigen Units of Measurement angelegt.}														  		
	\test{Neue Datums-/Zeit-Spalte erstellen}{}
		\ \\
	\teststep{Der Nutzer hat die Datei geladen und den Server angegeben, es wird keine CFG-Datei genutzt (Ende von Test 1-fach)}{Der Benutzer drückt den "+"-Button, um eine neue Datums-/Zeit-Spalte anzulegen}{Die Software erstellt zwei neue Textfelder mit "Spalte" und "Format" im Interface, sodass sich die Datums- und Zeitnagabe über mehrere Spalten erstrecken kann}
		\ \\
		
	
	\test{Datastream hinzufügen}{}
		\ \\
	\teststep{Ein Thing wurde ausgewählt, die Datastreams wurden in das Dropdown-Menü geladen}{Der Nutzer klickt auf den "{Add DS}"{-Button}}{Das Webinterface wird aktualisiert und rechts vom letzten Datastream wird ein neues Dropdown-Menü für einen neuen Datastream und neue Textfelder hinzugefügt}
		\ \\
		
		
	\test{Konfiguration abspeichern}{}
	\ \\
	\teststep{Der Nutzer hat eine Konfiguration erstellt.}{Der Nutzer drückt den "{Save}"{-Knopf}.}{Es wird eine cfg-Datei der Konfiguration erstellt und der Download der Datei wird angestoßen.}
	\ \\

	
	\test{Hilfe anfordern}{}
	\ \\
	\teststep{Der Nutzer befindet sich auf der Webseite.}{Der Nutzer drückt den "{Hilfe}"{-Knopf}.}{Es wird eine Anleitung für den Gebrauch der Weboberfläche angezeigt.}
	\ \\
	


	
%	\section{Zeitplanung}
%	Beispielhafte Terminplanung: \\
%	\begin{itemize}
%		\item 07.05. - 27.05.: Pflichtenheft
%		\item 28.05. - 24.06.: Entwurfsphase
%		\item 25.06. - 22.07.: Implementierung
%		\item 23.07. - 12.08.: Beispiel-Urlaubstermin (2 Wochen)
%		\item 13.08. - 02.09.: Qualitätssicherung
%		\item 03.09. - 09.09.: Terminfenster interne Abnahme
%		\item 10.09. - 17.09.: Terminfenster Abschlusspräsentation
%	\end{itemize}
	
	\newpage
	\section{Glossar}
	\begin{itemize}
		\item FROST \\
		Der \textbf{FR}auenhofer \textbf{O}penSource \textbf{S}ensor\textbf{T}hings-Server ist die erste komplette quelloffene Implementierung der OGC SensorThings API
		\item OGC \\
		Das \textbf{O}pen \textbf{G}eospatial \textbf{C}onsortium ist eine gemeinnützige Organisation, die sich zum Ziel gesetzt hat, die Entwicklung von raumbezogener Informationsverarbeitung (insbesondere Geodaten) auf Basis allgemeingültiger Standards festzulegen.
		\item SensorThings API \\
		Allgemeiner einheitlicher Standard um Verbindung zwischen Sensoren, deren Ort und Umgebung und den von ihnen erzeugten Daten herzustellen.
		\item CSV-/XLSX-Dateien \\
		CSV (Comma Seperated Value, .csv) und Excel (.xlsx) sind gängige Dateiformate zum Speichern von Daten (hier speziell: Sensor-Daten) in Tabellenform.
		\item CFG-Datei \\
		Konfigurationsdateien(kurz: CFG-Dateien) sind Textdateien, die speziell zur Speicherung bestimmter Einstellungen (Konfigurationen) dienen.
		\item Thing \\
		Ein Thing (deutsch: Ding) ist nach Definition der SensorThings API ein Objekt der physischen oder virtuellen Welt. Es benötigt einen Namen und eine Beschreibung. Es können sich ein oder mehrere Datastreams auf ein Thing beziehen.
		\item Datastream \\
		Ein Datastream ist eine fortlaufende Sammlung von Messungen (Observations) des selben Sensors.
		\item Integer \\
		Mit Integer wird in der Informatik ein Datentyp bezeichnet, der ganzzahlige Werte speichert.
		\item NULL \\
		Als Nullwert (kurz NULL) bezeichnet man in der Informatik einen Zustand, der das Fehlen eines Wertes anzeigen soll.
		\item Magic Numbers \\
		Deutsch: Magische Zahl. Ein im Quellcode eines Programms auftauchender Zahlenwert, dessen Bedeutung sich nicht unmittelbar erkennen lässt.
		\item Log-Datei \\
		Eine Log-Datei, auch Protokoll-Datei, enthält das automatisch geführte Protokoll aller oder bestimmter Aktionen von Prozessen auf einem Computersystem.
		\item Docker \\
		Docker ist eine Software zur Isolierung von Anwendungen. Docker vereinfacht die Bereitstellung von Anwendungen, weil sich sog. Container, die alle nötigen Pakete enthalten, leicht als Dateien transportieren und installieren lassen.
		\item GUI \\
		Ein Grafische Benutzeroberfläche (engl. \textbf{G}raphical \textbf{U}ser \textbf{I}nterface) hat die Aufgabe, eine Anwendungssoftware auf einem Rechner mittels grafischer Symbole und Steuerelemente für den Benutzer bedienbar zu machen.
		\item (Java) JRE \\
		Mit der Java-Laufzeitumgebung (\textbf{J}ava \textbf{R}untime \textbf{E}nvironment) werden Programme (Java-Anwendungen) weitgehend unabhängig vom darunter liegenden Betriebssystem ausgeführt.
		\item JavaScript \\
		JavaScript ist eine Programmiersprache, die hauptsächlich auf Webbrowsern Anwendung findet.
		\item headless Server \\
		Als headless (kopflos) bezeichnet man Computer, meist Serversysteme, die über keinen Bildschirm oder sonstige grafische Ausgabe verfügen.
		Diese Systeme haben als Steuerungsmöglichkeit in vielen Fällen eine Netzwerkverbindung.
		\item README \\
		Als README (deutsch: Liesmich) wird eine Datei bezeichnet, die üblicherweise mit Software mitgeliefert wird und diverse, oft wichtige Informationen über die Software enthält.
		\item Regex \\
		\textbf{Reg}ular \textbf{Ex}pressions (Regex, regulärer Ausdrucke) dienen der Beschreibung von Zeichenketten mit ähnlichem Format.
		Sie können als Filterkriterien in der Textsuche verwendet werden, indem der Text mit dem Muster des regulären Ausdrucks verglichen wird.
		\item HTTPS/SSL \\
		\textbf{H}yper\textbf{T}ext \textbf{T}ransfer \textbf{P}rotocol \textbf{S}ecure (HTTPS) ist ein sicheres Hypertext-Übertragungsprotokoll, das SSL benutzt.
		SSL steht für \textbf{S}ecure \textbf{S}ockets \textbf{L}ayer und ist die Standardtechnologie für die Absicherung von Internetverbindungen und den Schutz sensibler Daten, die zwischen zwei Systemen übertragen werden.
		\item GPLv3 \\
		GPLv3 ist die aktuelle Version von GPL. Diese \textbf{G}eneral \textbf{P}ublic \textbf{L}icense (allgemeine Veröffentlichungsgenehmigung) ist die am weitesten verbreitete Softwarelizenz,
		die einem gewährt, die Software auszuführen, zu studieren, zu ändern und zu verbreiten.
	\end{itemize}

	%Automatisch generiertes Glossar, obiges Glossar wird später gelöscht
	\printnoidxglossaries
	
\newpage
\section{Anhang}
\pagestyle{empty}
\begin{textblock*}{\paperwidth}(0\paperwidth ,0.2\paperheight)
\begin{figure}[t]
\centering
\noindent\includegraphics[scale=0.5, angle=90]{images/gui}
\caption{\label{fig:guiMainA}Hauptseite der Weboberfläche}
\end{figure}
\end{textblock*}
	
\end{document}
